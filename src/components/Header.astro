---
import { siteConfig } from "../config";

const hasProjects = siteConfig.projects && siteConfig.projects.length > 0;
const hasExperience = siteConfig.experience && siteConfig.experience.length > 0;
const hasEducation = siteConfig.education && siteConfig.education.length > 0;
const social = siteConfig.social ?? {};
---

<header
  id="header"
  class="fixed top-0 left-0 right-0 z-50 flex flex-col transition-all duration-300"
  style={`--accent-color: ${siteConfig.accentColor}`}
>
  <nav class="w-full max-w-7xl mx-auto px-4 sm:px-6 md:px-8 py-3 flex items-center justify-between flex-wrap gap-2">
    <ul class="flex items-center gap-3 sm:gap-4 md:gap-6 lg:gap-8 flex-wrap">
      <li class="flex items-center gap-2 sm:gap-3">
        <a href="#" aria-label="Home" class="flex items-center text-gray-800 hover:opacity-80 transition-opacity flex-shrink-0">
          <img src="/Screenplay-2026/favicon.svg" alt="" class="h-7 w-7 sm:h-8 sm:w-8" width="32" height="32" />
        </a>
        <a
          href="#about"
          class="text-gray-700 hover:text-black transition-colors font-medium text-sm sm:text-base"
        >
          About
        </a>
      </li>
      {
        hasProjects && (
          <li>
            <a
              href="#projects"
              class="text-gray-700 hover:text-black transition-colors font-medium text-sm sm:text-base"
            >
              Projects
            </a>
          </li>
        )
      }
      {
        hasExperience && (
          <li>
            <a
              href="#experience"
              class="text-gray-700 hover:text-black transition-colors font-medium text-sm sm:text-base"
            >
              Experience
            </a>
          </li>
        )
      }
      {
        hasEducation && (
          <li>
            <a
              href="#education"
              class="text-gray-700 hover:text-black transition-colors font-medium text-sm sm:text-base"
            >
              Education
            </a>
          </li>
        )
      }
    </ul>
    <div class="social-icons-inline flex items-center gap-4 sm:gap-5 text-gray-600 hidden md:flex">
      {social.email && (
        <a
          href={`mailto:${social.email}`}
          aria-label="Email"
          class="transition-colors duration-300 hover:text-[var(--accent-color)]"
        >
          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 sm:w-5.5 sm:h-5.5">
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <path d="M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z" />
            <path d="M3 7l9 6l9 -6" />
          </svg>
        </a>
      )}
      {social.linkedin && (
        <a href={social.linkedin} target="_blank" rel="noopener noreferrer" aria-label="LinkedIn" class="transition-colors duration-300 hover:text-[var(--accent-color)]">
          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 sm:w-5.5 sm:h-5.5">
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <path d="M8 11v5" /><path d="M8 8v.01" /><path d="M12 16v-5" /><path d="M16 16v-3a2 2 0 1 0 -4 0" />
            <path d="M3 7a4 4 0 0 1 4 -4h10a4 4 0 0 1 4 4v10a4 4 0 0 1 -4 4h-10a4 4 0 0 1 -4 -4z" />
          </svg>
        </a>
      )}
      {social.github && (
        <a href={social.github} target="_blank" rel="noopener noreferrer" aria-label="GitHub" class="transition-colors duration-300 hover:text-[var(--accent-color)]">
          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 sm:w-5.5 sm:h-5.5">
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
          </svg>
        </a>
      )}
      {social.letterboxd && (
        <a href={social.letterboxd} target="_blank" rel="noopener noreferrer" aria-label="Letterboxd" class="transition-colors duration-300 hover:text-[var(--accent-color)]">
          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 sm:w-5.5 sm:h-5.5">
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <path d="M4 6a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12z" />
            <path d="M8 9l4 3l4 -3" />
            <path d="M8 15l4 3l4 -3" />
          </svg>
        </a>
      )}
    </div>
    <div class="social-hamburger-wrapper flex md:hidden">
      <button
        type="button"
        id="header-hamburger-btn"
        class="p-2 rounded-lg text-gray-600 hover:text-gray-900 hover:bg-gray-100 transition-colors"
        aria-label="Open social links menu"
        aria-expanded="false"
        aria-controls="header-social-dropdown"
      >
        <span id="header-hamburger-icon" class="block w-6 h-5 relative">
          <span class="absolute left-0 top-0 w-6 h-0.5 bg-current rounded-full transition-transform duration-200"></span>
          <span class="absolute left-0 top-1/2 -translate-y-1/2 w-6 h-0.5 bg-current rounded-full transition-transform duration-200"></span>
          <span class="absolute left-0 bottom-0 w-6 h-0.5 bg-current rounded-full transition-transform duration-200"></span>
        </span>
        <span id="header-close-icon" class="hidden w-6 h-6">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6L6 18M6 6l12 12"/></svg>
        </span>
      </button>
    </div>
  </nav>
  <div
    id="header-social-dropdown"
    class="header-social-dropdown hidden w-full bg-white/95 backdrop-blur-sm border-t border-gray-100 py-3 px-4 md:hidden"
    aria-hidden="true"
  >
    <div class="flex items-center justify-center gap-6 text-gray-600">
      {social.email && (
        <a
          href={`mailto:${social.email}`}
          aria-label="Email"
          class="transition-colors duration-300 hover:text-[var(--accent-color)] p-2"
        >
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6">
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <path d="M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z" />
            <path d="M3 7l9 6l9 -6" />
          </svg>
        </a>
      )}
      {social.linkedin && (
        <a href={social.linkedin} target="_blank" rel="noopener noreferrer" aria-label="LinkedIn" class="transition-colors duration-300 hover:text-[var(--accent-color)] p-2">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6">
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <path d="M8 11v5" /><path d="M8 8v.01" /><path d="M12 16v-5" /><path d="M16 16v-3a2 2 0 1 0 -4 0" />
            <path d="M3 7a4 4 0 0 1 4 -4h10a4 4 0 0 1 4 4v10a4 4 0 0 1 -4 4h-10a4 4 0 0 1 -4 -4z" />
          </svg>
        </a>
      )}
      {social.github && (
        <a href={social.github} target="_blank" rel="noopener noreferrer" aria-label="GitHub" class="transition-colors duration-300 hover:text-[var(--accent-color)] p-2">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6">
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
          </svg>
        </a>
      )}
      {social.letterboxd && (
        <a href={social.letterboxd} target="_blank" rel="noopener noreferrer" aria-label="Letterboxd" class="transition-colors duration-300 hover:text-[var(--accent-color)] p-2">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6">
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <path d="M4 6a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12z" />
            <path d="M8 9l4 3l4 -3" />
            <path d="M8 15l4 3l4 -3" />
          </svg>
        </a>
      )}
    </div>
  </div>
</header>

<script>
  (function () {
    const header = document.getElementById("header");
    const hamburgerBtn = document.getElementById("header-hamburger-btn");
    const dropdown = document.getElementById("header-social-dropdown");
    const hamburgerIcon = document.getElementById("header-hamburger-icon");
    const closeIcon = document.getElementById("header-close-icon");

    window.addEventListener("scroll", () => {
      if (window.scrollY > 100) {
        header?.classList.add("bg-white/80", "backdrop-blur-sm");
      } else {
        header?.classList.remove("bg-white/80", "backdrop-blur-sm");
      }
    });

    function isOpen() {
      return dropdown?.classList.contains("!block") ?? false;
    }

    function openMenu() {
      dropdown?.classList.remove("hidden");
      dropdown?.classList.add("!block");
      dropdown?.setAttribute("aria-hidden", "false");
      hamburgerBtn?.setAttribute("aria-label", "Close social links menu");
      hamburgerBtn?.setAttribute("aria-expanded", "true");
      hamburgerIcon?.classList.add("hidden");
      closeIcon?.classList.remove("hidden");
    }

    function closeMenu() {
      dropdown?.classList.add("hidden");
      dropdown?.classList.remove("!block");
      dropdown?.setAttribute("aria-hidden", "true");
      hamburgerBtn?.setAttribute("aria-label", "Open social links menu");
      hamburgerBtn?.setAttribute("aria-expanded", "false");
      hamburgerIcon?.classList.remove("hidden");
      closeIcon?.classList.add("hidden");
    }

    hamburgerBtn?.addEventListener("click", () => {
      if (isOpen()) closeMenu();
      else openMenu();
    });

    document.addEventListener("click", (e) => {
      if (!isOpen()) return;
      const target = e.target as Node;
      if (dropdown?.contains(target) || hamburgerBtn?.contains(target)) return;
      closeMenu();
    });

    dropdown?.querySelectorAll("a").forEach((link) => {
      link.addEventListener("click", () => closeMenu());
    });
  })();
</script>

<style>
  html {
    scroll-behavior: smooth;
  }
</style>
